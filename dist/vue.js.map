{"version":3,"file":"vue.js","sources":["../src/compile/generate.js","../src/compile/parser.js","../src/compile/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/observer/dep.js","../src/observer/watcher.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/utils.js","../src/init.js","../src/initGlobalAPI/index.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{  asdasd  }}\n\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let style = {} // color:red;background:blue\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\n                style[arguments[1]] = arguments[2]\n            }); // 如果是sytle 我要将style转换成一个对象\n            attr.value = style;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}`\n}\n\nfunction gen(el) {\n    if (el.type == 1) {\n        return generate(el)\n    } else {\n        let text = el.text\n        if (!defaultTagRE.test(text)) {\n            return `_v(\"${text}\")`\n        } else {  \n            let tokens = []; // 杨帅 {{age}} 杨帅\n            // _v(_s(name) + '杨帅' + _s(age))\n            let match;\n            let lastIndex = defaultTagRE.lastIndex = 0; // 保证每次正则都是从0 开始匹配的\n            while (match = defaultTagRE.exec(text)) { // 如果exec + 全局匹配每次执行的时候 都需要还原lastIndex\n                let index = match.index; // 匹配到后将前面一段放到tokens中\n                if (index > lastIndex) {\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n                }\n                tokens.push(`_s(${match[1].trim()})`);   // 把当前这一段放到tokens中\n                lastIndex = index + match[0].length\n            }\n            if(lastIndex < text.length){\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n            return `_v(${tokens.join('+')})`\n        }\n    }\n}\n\n\nfunction genChildren(ast) {\n    let children = ast.children; // _c('div',{},'xxx')  _c('div',{},[])\n    if (children && children.length > 0) {\n        return children.map(child => gen(child)).join(',')\n    }\n    return false;\n}\nexport function generate(ast) {\n    let children = genChildren(ast)\n    let code = `_c(\"${ast.tag}\",${\n        ast.attrs.length? genProps(ast.attrs) : 'undefined'\n    }${\n        children? ',['+children+']' : ''\n    })`\n    return code;\n}\n\n// _c('div', {\n//     \"id\": \"app\",\n//     \"a\": \"1\",\n//     \"b\": \"2\",\n// }, [_v(\"hello\" + _s(age) + \"\\n        \"), _c('span', [_v(_s(name))])])","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; //\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  match匹配的是标签名\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 \nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的 分组里放的就是 \"b\",'b' ,b  => (b) 3 | 4 | 5\n\n\n// a = \"b\"   a = 'b'   a = b\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 <br/>   <div> \nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{  asdasd  }}\n\n\nexport function parserHTML(html) {\n    function advance(len) {\n        html = html.substring(len);\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length);\n            let attr;\n            let end;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n                advance(attr[0].length);\n            }\n            advance(end[0].length);\n            return match;\n        }\n        return false;\n\n    }\n    // 生成一颗树  <div id=\"app\" a=1 b=2>hello{{age}} <span>{{name}}</p>111</div>\n    // [div,span]\n    // 文本 -》 我的父亲是div\n    // span => 我的父亲是div\n    // {{name}} => 我的父亲是span\n    // 遇到结束标签 就做pop操作 [div]\n    // 111 -> 我的父亲是div\n    //  就做pop操作\n    let root = null;\n    let stack = [];\n    let parent = null;\n    function createAstElement(tag, attrs) {\n        return {\n            tag,\n            type: 1,\n            attrs,\n            children: [],\n            parent: null\n        }\n    }\n    function start(tagName, attrs) { // 匹配到了开始的标签\n        let element = createAstElement(tagName, attrs);\n        if (!root) {\n            root = element\n        }\n        let parent = stack[stack.length - 1];\n        if (parent) {\n            element.parent = parent; // 当放入span的时候 我就知道div是他的父亲\n            parent.children.push(element);\n        }\n        stack.push(element);\n    }\n    function chars(text) { // 匹配到了开始的标签\n        let parent = stack[stack.length - 1];\n        text = text.replace(/\\s/g,''); // 遇到空格就删除掉\n        if(text){\n            parent.children.push({\n                text,\n                type:3\n            });\n        }\n    }\n    function end(tagName) {\n        stack.pop(); // 每次出去就在栈中删除当前这一项, 这里你可以判断标签是否出错\n    }\n    while (html) { // html只能由一个根节点\n        let textEnd = html.indexOf('<');\n        if (textEnd == 0) { // 如果遇到< 说明可能是开始标签或者结束标签 <!DOC\n            const startTagMatch = parseStartTag();\n            // console.log(startTagMatch)\n            if (startTagMatch) { // 匹配到了开始标签\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue\n            }\n            // 如果代码走到这里了 说明是结束标签\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) {\n                end(endTagMatch[1]);\n                advance(endTagMatch[0].length);\n            }\n        }\n        let text;\n        if (textEnd > 0) {\n            text = html.substring(0, textEnd)\n        }\n        if (text) {\n            chars(text);\n            advance(text.length);\n        }\n    }\n    return root;\n}\n\n// 虚拟dom是描述dom的对象\n{ /*  <span>{{name}}</span></div> */ }\n\n// ast 抽象语法树 ，描述html语法本身的\n\n// {\n//     tag:'div',\n//     type:1,\n//     children:[{text:'hello {{age}}',type:3,parent:'div对象'},{ type:'span',type:1,attrs:[],parent:'div对象'}]\n//     attrs:[{name:'id':value:'app'}],\n//     parent:null\n// }","import { generate } from \"./generate\";\nimport { parserHTML } from \"./parser\";\n\nexport function compileToFunction(html) {\n    // 编译流程有三个部分 1.把模板变成ast语法树   2.优化标记静态节点 （patchFlag,BlockTree） 3.把ast变成render函数\n    const ast = parserHTML(html);\n    // console.log(ast);\n    \n    // 2.优化标记静态节点\n\n\n    // 3.将ast变成render函数  你要把刚才这棵树 用字符串拼接的方式 变成render函数\n    const code = generate(ast); // 根据ast生成一个代码字符串\n\n    const render = new Function(`with(this){return ${code}}`);\n    return render;\n}\n\n\n// 第一种 一个个的进行词法解析 <  {  （状态机 随着状态的扭转把结果进行解析） Vue3\n// 第二种 采用的是正则\n// <div id=\"app\">hello{{age}}</div>","export function createElement(vm,tag, props = {}, children) {\n    return vnode(vm, tag, props, children,undefined, props.key)\n}\n\nexport function createTextElement(vm,text) {\n    return vnode(vm, undefined, undefined, undefined, text)\n}\n\nfunction vnode(vm, tag, props, children, text, key) {\n    return {\n        vm,\n        tag,\n        props,\n        children,\n        text,\n        key\n    }\n}","export function patch(oldVnode, vnode) {\n\n    if (oldVnode.nodeType === 1) {\n        // 初始化渲染操作\n        // 根据虚拟节点创造真实节点, 先根据虚拟节点创建一个真实节点，将节点插入到页面中在将老节点删除 \n        // 为什么$mount('body | html')\n        const parentElm = oldVnode.parentNode; // 获取父元素\n        const elm = createElm(vnode)\n        // 直接扔到body里不行吗？\n        parentElm.insertBefore(elm, oldVnode.nextSibling)\n        parentElm.removeChild(oldVnode);\n\n        return elm;\n    }\n}\n\nfunction createElm(vnode) {\n    const { tag, props, children, text } = vnode;\n    if (typeof tag == 'string') {\n        vnode.el = document.createElement(tag); // 把创建的真实dom和虚拟dom映射在一起方便后续更新和复用\n        children.forEach(child=>{\n            vnode.el.appendChild(createElm(child))\n        });\n        // 样式稍后处理  diff算法的时候需要比较新老的属性进行更新？？？？？？\n    }else{\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;\n}","let id = 0;\n\n// 默认收集依赖调用的是dep.depend方法 核心就是让dep和watcher产生关联\n// 我要记住这个属性依赖了哪个watcher，等会数据变化我要知道哪个watcher要更新了\n// 还要记住watcher对应了那些属性 ...\nclass Dep{\n    constructor() {\n        this.id = id++;\n        this.subs = [];\n    }\n    depend(){\n        Dep.target.addDep(this); // 让watcher记住dep，同时去重\n        // this.subs.push(Dep.target); // 直接让属性记住watcher？\n    }\n    addSub(watcher){\n        this.subs.push(watcher);\n    }\n    notify(){\n        this.subs.forEach(watcher=>watcher.update());\n    }\n}\nDep.target = null;\n\nexport default Dep; // 每个对象都增加一个dep ， 每个属性都增加一个dep","let id = 0;\nimport Dep from './dep';\nclass Watcher {\n    // 用户的回调 是用户的函数  \n    // exprOrFn是监控的属性 name (有可能是渲染watcher) 先取一下vm.name 作为老的值，后续值变化了 才去取一次\n    // vm 是当前的实例  \n    // options 就是参数列表\n    constructor(vm,exprOrFn,callback,options = {}) {\n        this.deps = []; // watcher对应存放的dep\n        this.id = id++;\n        if(typeof exprOrFn == 'function'){\n            this.getter = exprOrFn; // 将用户传入的fn 保存在getter上\n        }else{\n            this.getter = () => vm[exprOrFn] // 取值的时候会收集watcher\n        }\n        this.depsId = new Set(); // 去重\n        this.value = this.get();\n        // this.value 就是老的值\n        this.callback = callback;\n        this.options = options\n    }\n    get() {\n        Dep.target = this; // 将watcher暴露到全局变量上\n        let value =  this.getter(); // 第一次渲染会默认调用getter  vm._update(vm._render())  // 取值的逻辑\n        Dep.target = null;\n        return value\n    }\n    addDep(dep) {\n        let id = dep.id;\n        if (!this.depsId.has(id)) {\n            this.depsId.add(id);\n            this.deps.push(dep); // 让watcher记住dep\n            dep.addSub(this)\n        }\n    }\n    update() {\n        console.log('update')\n        queueWatcher(this);\n    }\n    run() { // 真实的执行\n        let newValue = this.get();\n        let oldValue = this.value;\n        this.value = newValue;\n        if(this.options.user){\n            this.callback(newValue,oldValue)\n        }\n\n    }\n}\nlet watchsId = new Set();\nlet queue = [];\nlet pending = false;\nfunction flushShedulerQueue() {\n    for (let i = 0; i < queue.length; i++) {\n        let watcher = queue[i];\n        watcher.run();\n    }\n    queue = [];\n    watchsId.clear();\n    pending = false;\n}\n\nfunction queueWatcher(watcher) {\n    const id = watcher.id; // 取出watcher的id \n    if (!watchsId.has(id)) { // 看一下这里有没有这个watcher\n        watchsId.add(id); // 如果没有添加watcher到更新队列中\n        queue.push(watcher) // 放到队列中\n        if (!pending) {\n            // vue2 里面要考虑兼容性 vue2里面会优先采用promise但是ie不支持promise 需要降级成 mutationObserver h5提供的一个方法\n            // setImmediate 这个方法在ie中性能是比较好的，都不兼容fallback -> setTimeout\n            Promise.resolve().then(flushShedulerQueue);\n            pending = true\n        }\n    }\n}\nexport default Watcher","import { createElement, createTextElement } from \"./vdom/index.js\"\nimport { patch } from \"./vdom/patch.js\";\nimport Watcher from './observer/watcher'\n\nexport function lifeCycleMixin(Vue){\n    Vue.prototype._update = function (vnode){ // 虚拟dom变成真实dom进行渲染的，后续更新也调用此方法\n        this.$el =patch(this.$el,vnode); // 渲染  传入一个真实的dom 和 vnode\n        // 更新  传入两个虚拟节点  diff算法 \n    }   \n    Vue.prototype._c = function(){ // _c('div',undefoined,[])\n        return createElement(this,...arguments)\n    }\n    Vue.prototype._v = function(text){ // _v(字符串 + name + 'xxx')\n        return createTextElement(this,text)\n    }\n    Vue.prototype._s = function(val){ // _s(name)\n        if(typeof val === 'object') return JSON.stringify(val);\n        return val;\n    }\n    Vue.prototype._render = function(){ // 调用编译后的render方法，生成虚拟节点\n        const vm = this;\n        let {render} = vm.$options;\n        let vnode = render.call(vm); // 这里会进行取值操作 触发了get方法 仅需取值 （依赖收集）\n        return vnode\n    }\n}\nexport function mountComponent(vm, el) {\n    // vue3 里面靠的是产生一个effect, vue2中靠的是watcher\n    let updateComponent = () => {\n        // 1.产生虚拟节点 2.根据虚拟节点产生真实节点\n        vm._update(vm._render());\n    }\n    new Watcher(vm,updateComponent,()=>{\n        callHook('beforeUpdate')\n    }); // 渲染是通过watcher来进行渲染的\n}\n\n// 和Vue3的渲染流程是否一致？","let oldArrayPrototype = Array.prototype;\nexport const proto = Object.create(oldArrayPrototype);\n\n// proto.__proto__ = oldArrayPrototype\n// arr.push()\n// 函数劫持 让vue中的数组 可以拿到重写后的原型，如果找不到调用数组本身的方法\n[\n    'push', 'pop', 'unshfit', 'shift', 'reverse', 'sort', 'splice'\n].forEach(method => {\n    proto[method] = function(...args) { // args 可能是对象，我们需要对新增的对象也增加劫持操作\n        // 调用老的方法\n        let r = oldArrayPrototype[method].call(this, ...args);\n        let ob = this.__ob__\n        let inserted;\n        // 我们需要对能新增的功能 再次做拦截 将新增的属性进行代理\n        switch (method) {\n            case 'push':\n            case 'unshift': // 前后新增\n                inserted = args\n                break;\n            case 'splice': // arr.splice(0,1,新增的内容)\n                inserted = args.slice(2)\n            default:\n                break;\n        }\n        // 找到数组的dep 让数组更新\n        // 我需要循环数组对他进行每一项的拦截\n        ob.dep.notify(); // 告诉用户该更新页面了\n\n        if(inserted)  ob.observeArray(inserted);\n        return r;\n    }\n})","import { proto } from \"./array\";\nimport Dep from './dep';\n\n// 这里需要让数组进行依赖收集 ，数组在页面中使用了，应该让数组收集watcher，调用push\\shuft\\unshift 方法应该触发数组的对应的watcher来更新\nclass Observer {\n    constructor(value) { // 将用户传入的选项 循环进行重写\n        this.dep = new Dep(); // 相当于给对象（数组、object）本身增加了一个dep属性\n        Object.defineProperty(value, '__ob__', {\n            enumerable: false, // 在后续的循环中不可枚举的属性不能被循环出来\n            value: this\n        })\n        if (Array.isArray(value)) {\n            // 重写数组的七个方法\n            value.__proto__ = proto;\n            // 如果数组里放的是对象 要对对象再次代理\n            this.observeArray(value);\n        } else {\n            this.walk(value);\n        }\n    }\n    walk(target) {\n        Object.keys(target).forEach(key => {\n            defineReactive(target, key, target[key]);\n        })\n    }\n    observeArray(target) {\n        for (let i = 0; i < target.length; i++) {\n            observe(target[i]);\n        }\n    }\n}\n\nfunction dependArray(value) {\n    for (let i = 0; i < value.length; i++) {\n        let c = value[i]; // [[[[[[[[]]]]]]]]\n        c.__ob__ && c.__ob__.dep.depend(); // 让数组中的对象或者数组再次依赖收集  [{name:'zzz'},[]]\n        if (Array.isArray(c)) {\n            dependArray(c); // 保证数组中的对象和数组都能有依赖收集的功能\n        }\n    }\n}\n\nfunction defineReactive(target, key, value) { // 定义响应式\n    let dep = new Dep(); // 这个dep属性是为了key来服务的\n    // 不存在的属性不会被defineProperty\n    let childOb = observe(value); // 递归对象类型检测 （性能差 默认情况下要对所有的都进行递归操作）\n\n    Object.defineProperty(target, key, { // 将属性重新定在对象上，增加了get和set（性能差）\n        get() {\n            // console.log('属性获取',36)\n            if (Dep.target) {\n                // 数组在页面中访问的方式也是通过实例来访问的 vm.arr, 也会执行对应的get方法， 让数组本身的dep收集这个watcher即可\n                dep.depend(); // 让属性对应的dep 记住当前的watcher， 我还需要让watcher记住dep ， 要去重\n                if (childOb) {\n                    childOb.dep.depend(); // 这个就是让对象本身和数组本身进行依赖收集\n                    // 还要对数组内部的对象也进行收集\n                    if (Array.isArray(value)) { // 因为数组里面可能有对象 可能里面是数组，那我需要让里面的数组也进行依赖收集 \n                        dependArray(value)\n                    }\n                }\n            }\n            return value;\n        },\n        set(newValue) {\n            if (newValue === value) return\n            // console.log('属性设置',41)\n            observe(newValue); // 设置的值如果是对象，那么就再次调用observe让对象变成响应式的\n            value = newValue;\n            debugger;\n            dep.notify();\n        }\n    })\n}\n\nexport function observe(data) {\n    // data 就是我们用户传入的数据 我们需要对他进行观测\n    if (typeof data !== 'object' || data == null) {\n        return; // 不是对象不能观测\n    }\n    if (data.__ob__) { // 如果一个数据有__ob__ 属性 说明已经被观测过了\n        return;\n    }\n    // 后续要我们要知道是否这个对象被观测过了\n    return new Observer(data); // xxx instanceof Observer\n}","import { observe } from \"./observer/index.js\"; // rollup-plugin-rsolve\n\nexport function initState(vm) {\n    const options = vm.$options;\n    // 先props 在methods 在data 在 computed 在watch  (检测重名 规则是vue自己定的)\n    if (options.data) {\n        // 初始化data选项\n        initData(vm)\n    }\n    if (options.computed) {\n        // 计算属性的初始化\n        initComputed(vm)\n    }\n    if (options.watch) {\n        // 做一个watch选项的初始化\n        initWatch(vm)\n    }\n}\n\nfunction proxy(target, key, property) { // vm.xxx -> vm._data.xxx\n    Object.defineProperty(target, property, {\n        get() {\n            return target[key][property]\n        },\n        set(n) {\n            target[key][property] = n;\n        }\n    })\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    // 需要对用户提供的data属性把他的所有属性进行重写增添get和set，只能拦截已经存在的属性\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data; // vm._data 和 data是同一个对象，观测的是data 但是vm._data 也是被观测过的\n\n    // 用户使用 vm._data来获取有些麻烦， 我希望可以通过vm.xxx -> vm._data.xxx\n    for (let key in data) {\n        proxy(vm, '_data', key); // 循环代理属性, 为了用户使用的时候 直接可以通过vm.xxx\n    }\n    observe(data); // 对数据进行挂测\n}\n\nfunction initComputed(vm) {\n\n}\n\nfunction initWatch(vm) {\n    const watch = vm.$options.watch;\n    // 给每一个属性都创建一个watcher  （渲染watcher） （用户watcher） （计算属性watcher）\n    for(let key in watch){\n        createWatcher(vm,key,watch[key]);\n    }\n\n}\nexport function createWatcher(vm,key,value){\n    return vm.$watch(key,value); // 监控某个属性 和对应的处理函数\n}","// 1.合并 拷贝 面试问js 就问这俩 防抖节流柯里化\nconst strats = {};\n['beforeCreate', 'created', 'beforeMount', 'mounted'].forEach(method => {\n    strats[method] = function(parentVal,childVal) {\n        // 第一次 parentVal 是空的 Vue.options = {beforeCreate:function(){}} , options ={a,beforeCreate:function(){}}\n        if(childVal){\n            if(parentVal){\n                return parentVal.concat(childVal); // 父亲和儿子进行合并\n            }else{\n                return [childVal]; // 如果儿子有声明周期 父亲没有 就将儿子的变成数组\n            }\n        }else{\n            return parentVal; // 如果儿子没有就直接用父亲的\n        }\n    }\n})\nexport function mergeOptions(parentVal, childVal) { // 合并的过程是自己定义的策略\n    // 1.如果a的有b的没有，那么采用a的\n    // 2.如果a的有b的也有，那就采用b的\n    // 3.特殊情况 比如说生命周期，我就需要做处理把多个生命周期合并成数组\n    const options = {};\n    for (let key in parentVal) {\n        mergeField(key)\n    }\n    for (let key in childVal) { // b有的a没有\n        if (!parentVal.hasOwnProperty(key)) {\n            mergeField(key)\n        }\n    }\n    function mergeField(key) {\n        // 针对不同的key进行合并 ?, 将不同的策略定义在对象上，到时候根据不同的策略进行加载\n        if (strats[key]) {\n            options[key] = strats[key](parentVal[key], childVal[key]);\n        } else {\n            options[key] = childVal[key] || parentVal[key]; // 新的有优先用新的\n        }\n    }\n    return options;\n}","import { compileToFunction } from \"./compile/index.js\";\nimport { mountComponent } from \"./lifecycle.js\";\nimport Watcher from \"./observer/watcher.js\";\nimport { createWatcher, initState } from \"./state\";\nimport { mergeOptions } from \"./utils.js\";\n\nfunction callHook(vm,hook){ // 找到对应的处理函数依次执行\n    const handlers = vm.$options[hook];\n    if(handlers){\n        for(let i = 0; i < handlers.length;i++){\n            handlers[i].call(vm);\n        }\n    }\n}\nexport function initMixin(Vue) {\n    Vue.prototype._init = function(options) {\n        const vm = this;\n        // 此时options 是用户的 我需要用用户的+全局的 合并出结果来\n        vm.$options = mergeOptions(this.constructor.options,options); // 后续所有的原型中都可以通过 vm.$options 拿到用户传递的选项\n\n        callHook(vm,'beforeCreate');\n\n        initState(vm); // 状态的初始化，目的就是初始化用户传入的props  data  computed watch\n        // 判断用户是否传入了el ，如果传入了el 要实现页面的挂载\n        if(options.el){\n            vm.$mount(options.el);\n        }\n    }   \n    Vue.prototype.$mount = function(el){\n        // render -> template -> outerHTML\n        const vm = this;\n        el  = document.querySelector(el);\n        vm.$el = el;\n        const options = vm.$options;\n        let render;\n        if(!options.render){\n            // 没有render\n            let template = options.template;\n            if(!template){  // 如果没有模板 就采用指定元素对应的模板\n                template = el.outerHTML\n            }\n            options.render = compileToFunction(template); // 模板的编译\n        }\n        // 有render直接调用render方法\n        // render = options.render;  // 最终拿到编译后的render\n\n        // 根据render方法产生虚拟节点，在将虚拟节点变成真实节点 插入到页面中即可\n        mountComponent(vm,el)// 组件挂载流程 \n    }\n    Vue.prototype.$watch = function(key,handler){\n        debugger;\n       const watcher =  new Watcher(this,key,handler,{user:true});\n    }\n\n  \n}","import { mergeOptions } from \"../utils\";\n\nexport function initGlobalAPI(Vue) {\n    Vue.options = {}; // 所有的全局属性 都会放到这个变量上\n    Vue.mixin = function(options) { // 用户要合并的对象\n        this.options = mergeOptions(this.options, options)\n    }\n}\n","import { initMixin } from \"./init\";\nimport { initGlobalAPI } from \"./initGlobalAPI/index\";\nimport { lifeCycleMixin } from \"./lifecycle\";\n\n// 给Vue的构造函数 扩展原型方法， 还会扩展一些静态方法\nfunction Vue(options){ // 构造函数\n    this._init(options)\n}\ninitGlobalAPI(Vue)\ninitMixin(Vue);\nlifeCycleMixin(Vue);\nexport default Vue;\n\n\n// 1. 当new Vue的时候都发生了什么, 默认会进行vue的初始化操作 _init(), 后面组件的初始化也会调用_init\n\n\n// optionsApi 不知道这些选项哪些能用到  所以无法实现tree-shaking\n"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","style","value","replace","arguments","JSON","stringify","slice","gen","el","type","generate","text","test","tokens","match","lastIndex","exec","index","push","trim","join","genChildren","ast","children","map","child","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","advance","len","substring","parseStartTag","start","tagName","end","root","stack","createAstElement","parent","element","chars","pop","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","render","Function","createElement","vm","props","vnode","undefined","key","createTextElement","patch","oldVnode","nodeType","parentElm","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","document","forEach","appendChild","createTextNode","id","Dep","subs","target","addDep","watcher","update","Watcher","exprOrFn","callback","options","deps","getter","depsId","Set","get","dep","has","add","addSub","console","log","queueWatcher","newValue","oldValue","user","watchsId","queue","pending","flushShedulerQueue","run","clear","Promise","resolve","then","lifeCycleMixin","Vue","prototype","_update","$el","_c","_v","_s","val","_render","$options","call","mountComponent","updateComponent","callHook","oldArrayPrototype","Array","proto","Object","create","method","args","r","ob","__ob__","inserted","notify","observeArray","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","observe","dependArray","c","depend","childOb","set","data","initState","initData","computed","watch","initWatch","proxy","property","n","_data","createWatcher","$watch","strats","parentVal","childVal","concat","mergeOptions","mergeField","hasOwnProperty","hook","handlers","initMixin","_init","constructor","$mount","querySelector","template","outerHTML","handler","initGlobalAPI","mixin"],"mappings":"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"}